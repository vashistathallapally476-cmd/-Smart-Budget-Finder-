<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Recommendations - SmartBudget</title>

<style>
*{
    box-sizing:border-box;
    margin:0;
    padding:0;
    font-family:'Poppins',sans-serif;
}

/* BODY */

body{
    background: linear-gradient(135deg,#0f172a,#1e293b,#020617);
    color:white;
}

/* NAVBAR */

.navbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px 80px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(10px);
    border-bottom:1px solid rgba(255,255,255,0.08);
}

.logo{
    display:flex;
    align-items:center;
    gap:10px;
    font-size:22px;
    font-weight:600;
}

.logo-box{
    background:linear-gradient(135deg,#6366f1,#22c55e);
    padding:10px;
    border-radius:10px;
}

.nav-links{
    list-style:none;
    display:flex;
    gap:25px;
}

.nav-btn{
    background:none;
    border:none;
    color:#cbd5f5;
    font-size:16px;
    padding:8px 18px;
    border-radius:20px;
    cursor:pointer;
    transition:0.3s;
}

.nav-btn:hover{
    background:rgba(255,255,255,0.08);
    color:white;
}

.active{
    background:linear-gradient(135deg,#6366f1,#22c55e);
    color:white;
}

/* TITLE */

.title{
    padding:40px 80px 10px;
}

.title h1{
    font-size:38px;
}

.title p{
    color:#cbd5f5;
}

/* BUDGET INFO */

.budget-info{
    text-align:center;
    margin:30px auto 10px;
    font-size:20px;
    font-weight:600;
    color:#22c55e;
}

.change-budget-btn{
    padding:10px 22px;
    border:none;
    border-radius:25px;
    background:rgba(255,255,255,0.08);
    color:white;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.change-budget-btn:hover{
    background:linear-gradient(135deg,#6366f1,#22c55e);
}

/* FILTERS */

.filters{
    margin:20px 80px;
    padding:15px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(10px);
    border-radius:12px;
    display:flex;
    gap:15px;
}

.filters select,
.filters button{
    padding:10px 15px;
    border-radius:8px;
    border:none;
    background:rgba(255,255,255,0.08);
    color:white;
}

/* GRID */

.grid{
    padding:30px 80px;
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:25px;
}

/* PRODUCT CARD */

.product-card{
    width:100%;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(10px);
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.08);
    overflow:hidden;
    display:flex;
    flex-direction:column;
    transition:0.25s;
}

.product-card:hover{
    transform:translateY(-6px);
    background:rgba(255,255,255,0.08);
}

/* BADGES */

.badge-row{
    display:flex;
    gap:6px;
    padding:10px;
    align-items:center;
}

.platform{
    background:#fde68a;
    padding:4px 10px;
    border-radius:15px;
    font-size:12px;
    color:black;
    font-weight:600;
}

.best{
    background:rgba(34,197,94,0.15);
    padding:4px 10px;
    border-radius:15px;
    font-size:12px;
    color:#22c55e;
}

.rank{
    margin-left:auto;
    background:#22c55e;
    color:white;
    width:24px;
    height:24px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:12px;
}

/* IMAGE */

.image-box{
    height:180px;
    background:rgba(255,255,255,0.04);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:16px;
}

/* CONTENT */

.content{
    padding:14px;
}

.top-row{
    display:flex;
    justify-content:space-between;
    margin-bottom:8px;
}

.category{
    background:rgba(255,255,255,0.08);
    padding:4px 10px;
    border-radius:15px;
    font-size:11px;
}

.rating{
    font-size:12px;
    color:#cbd5f5;
}

/* PRODUCT TITLE */

.title2{
    font-weight:600;
    font-size:15px;
    margin:6px 0;
}

/* PRICE */

.price{
    font-size:20px;
    color:#22c55e;
    font-weight:700;
    margin-bottom:10px;
}

/* SCORE BOX */

.score-box{
    display:flex;
    justify-content:space-between;
    background:rgba(255,255,255,0.05);
    padding:8px;
    border-radius:10px;
    text-align:center;
    margin-bottom:10px;
}

.label{
    font-size:11px;
    color:#cbd5f5;
}

.val{
    font-weight:600;
    font-size:13px;
}

.final{
    color:#22c55e;
}

/* BUTTONS */

.btn-row{
    display:flex;
    gap:8px;
}

.btn-row button{
    flex:1;
    padding:8px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.1);
    background:rgba(255,255,255,0.05);
    color:white;
    font-size:13px;
    cursor:pointer;
}

.btn-row button:hover{
    background:rgba(255,255,255,0.12);
}

/* BUY BUTTON */

.buy{
    margin-top:8px;
    width:100%;
    padding:10px;
    border:none;
    border-radius:25px;
    background:linear-gradient(135deg,#6366f1,#22c55e);
    color:white;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.buy:hover{
    transform:translateY(-2px);
}

</style>

</head>

<body>
  <nav class="navbar">
        <div class="logo">
            <div class="logo-box">üí≥</div>
            <span>SmartBudget</span>
        </div>
        <ul class="nav-links">
            <li>
            <button class="nav-btn"data-page="index.html" onclick="goToHome()">Home</button>
            </li>
            <li>
            <button class="nav-btn"data-page="budget.html" onclick="goToBudget()">Budget</button>
            </li>
            <li>
            <button class="nav-btn" data-page="recommendations.html"onclick="goToRecommendations()">Recommendations</button>
            </li>
            <li>
            <button class="nav-btn"data-page="comparison.html"  onclick="goToComparison()">Comparison</button>
            </li>
            <li>
             <button class="nav-btn" data-page="wishlist.html" onclick="goToWishlist()">
                    Wishlist ‚ù§Ô∏è <span id="wishlistCount">(0)</span>
            </button>
            </li>
            <li>
            <button class="nav-btn" data-page="about.html"  onclick="goToAbout()">About</button>
            </li>
        </ul>
    </nav>

    <div class="budget-info" id="budgetInfo"></div>

    <div style="text-align:center; margin-bottom:30px;">
    <button class="change-budget-btn" onclick="goToBudget()">
        Change Budget
    </button>
    </div>


<div class="title">
    <h1>Recommendations</h1>
    <p>Top products within your budget</p>
</div>

<div class="filters">
    <select><option>All Categories</option></select>
    <select><option>All Platforms</option></select>
    <button>Budget: ‚Çπ0 - ‚Çπ2000</button>
</div>
<div class="grid">

    <div class="product-card" data-price="24999">
         <div class="badge-row">
        <span class="platform">Flipkart</span>
        <span class="best">Best value under your budget</span>
        <span class="rank">#1</span>
    </div>

    <div class="image-box">Headphones</div>

    <div class="content">
        <div class="top-row">
            <span class="category">Headphones</span>
            <span class="rating">‚≠ê 4.8 (18)</span>
        </div>

        <div class="title2">Apple AirPods Pro 2nd Gen</div>
        <div class="price">‚Çπ24,999</div>

        <div class="score-box">
            <div>
                <div class="label">Trust</div>
                <div class="val">90,820.8</div>
            </div>
            <div>
                <div class="label">Value</div>
                <div class="val">1.9</div>
            </div>
            <div>
                <div class="label">Final</div>
                <div class="val final">36329.5</div>
            </div>
        </div>

        <div class="btn-row">
           <button class="wishlist-btn" onclick="toggleWishlist(this)">‚ô° Save</button>
            <button onclick="addToComparison(this)">‚áÑ Compare</button>
        </div>

        <button class="buy">Buy on Flipkart</button>
    </div>
    </div>

    <div class="product-card"data-price="26999">
       <div class="badge-row">
        <span class="platform">Flipkart</span>
        <span class="best">Best value under your budget</span>
        <span class="rank">#1</span>
    </div>

    <div class="image-box">Headphones</div>

    <div class="content">
        <div class="top-row">
            <span class="category">Headphones</span>
            <span class="rating">‚≠ê 4.8 (921)</span>
        </div>

        <div class="title2">Apple AirPods parsha</div>
        <div class="price">‚Çπ26,999</div>

        <div class="score-box">
            <div>
                <div class="label">Trust</div>
                <div class="val">90,820.8</div>
            </div>
            <div>
                <div class="label">Value</div>
                <div class="val">1.9</div>
            </div>
            <div>
                <div class="label">Final</div>
                <div class="val final">36329.5</div>
            </div>
        </div>

        <div class="btn-row">
            <button class="wishlist-btn" onclick="toggleWishlist(this)">‚ô° Save</button>
            <button onclick="addToComparison(this)">‚áÑ Compare</button>
        </div>

        <button class="buy">Buy on Flipkart</button>
    </div>
    </div>

    <div class="product-card" data-price="24999">
        <div class="badge-row">
        <span class="platform">Flipkart</span>
        <span class="best">Best value under your budget</span>
        <span class="rank">#1</span>
    </div>

    <div class="image-box">Headphones</div>

    <div class="content">
        <div class="top-row">
            <span class="category">Headphones</span>
            <span class="rating">‚≠ê 4.8 (18,921)</span>
        </div>

        <div class="title2">Apple AirPods Manju</div>
        <div class="price">‚Çπ24,999</div>

        <div class="score-box">
            <div>
                <div class="label">Trust</div>
                <div class="val">90,820.8</div>
            </div>
            <div>
                <div class="label">Value</div>
                <div class="val">1.9</div>
            </div>
            <div>
                <div class="label">Final</div>
                <div class="val final">36329.5</div>
            </div>
        </div>

        <div class="btn-row">
            <button class="wishlist-btn" onclick="toggleWishlist(this)">‚ô° Save</button>
             <button onclick="addToComparison(this)">‚áÑ Compare</button>
        </div>

        <button class="buy">Buy on Flipkart</button>
    </div>
    </div>

</div>

<script>
  function goToHome(){
    window.location.href = "index.html";
}
function goToBudget(){
    window.location.href = "budget.html";
}
function goToRecommendations(){
    window.location.href = "recommendations.html";
}
function goToComparison(){
    window.location.href = "comparison.html";
}
function goToWishlist(){
    window.location.href = "wishlist.html";
}
function goToAbout(){
    window.location.href = "about.html";
}
  function go(page){
    window.location.href = page;
}

// highlight current page
const currentURL = window.location.href;

document.querySelectorAll(".nav-btn").forEach(btn => {
    const page = btn.dataset.page;
    if(currentURL.includes(page)){
        btn.classList.add("active");
    }
});
function toggleWishlist(button){


    const card = button.closest(".product-card");

    const name = card.querySelector(".title2").innerText;
    const price = card.querySelector(".price").innerText;
    const image = card.querySelector(".image-box").innerHTML;

    let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];

    const index = wishlist.findIndex(item => item.name === name);

    if(index > -1){
        // REMOVE
        wishlist.splice(index,1);
        button.innerHTML = "‚ô° Save";
    }else{
        // ADD
        wishlist.push({name, price, image});
        button.innerHTML = "‚ù§Ô∏è Saved";
    }

    localStorage.setItem("wishlist", JSON.stringify(wishlist));

    updateWishlistCount();
localStorage.setItem("wishlist", JSON.stringify(wishlist));
}


// When page loads ‚Üí show correct heart state
document.addEventListener("DOMContentLoaded", function(){

    let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];

    document.querySelectorAll(".product-card").forEach(card => {

        const name = card.querySelector(".title2").innerText;
        const btn = card.querySelector(".wishlist-btn");

        const exists = wishlist.find(item => item.name === name);

        if(exists){
            btn.innerHTML = "‚ù§Ô∏è Saved";
        }
    });
});


function updateWishlistCount(){

    let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
    const countElement = document.getElementById("wishlistCount");

    if(countElement){
        countElement.innerText = "(" + wishlist.length + ")";
    }
}

document.addEventListener("DOMContentLoaded", function(){
    updateWishlistCount();
});

//comparision list

function addToComparison(button){
    const card = button.closest(".product-card");

    const name = card.querySelector(".title2").innerText;
    const price = card.querySelector(".price").innerText;
    const category = card.querySelector(".category").innerText;
    const ratingText = card.querySelector(".rating").innerText;
    const image = card.querySelector(".image-box").innerHTML;

    // Extract numeric rating and reviews
    const ratingMatch = ratingText.match(/([\d.]+)/); // matches 4.8
    const reviewsMatch = ratingText.match(/\(([\d,]+)\)/); // matches (18,921)

    const rating = ratingMatch ? parseFloat(ratingMatch[1]) : 0;
    const reviewsCount = reviewsMatch ? parseInt(reviewsMatch[1].replace(/,/g,'')) : 0;

    let comparison = JSON.parse(localStorage.getItem("comparison")) || [];

    // Prevent duplicates
    const exists = comparison.find(item => item.name === name);
    if(exists){
        alert("Already added to comparison");
        return;
    }

    // Limit to 2
    if(comparison.length >= 2){
        alert("You can compare only 2 products");
        return;
    }

    // Save numeric rating and reviewsCount
    comparison.push({name, price, category, rating, reviewsCount, image});

    localStorage.setItem("comparison", JSON.stringify(comparison));

    window.location.href = "comparison.html";
}




function updateReviewsCount() {
    document.querySelectorAll('.product-card').forEach(card => {
        const ratingSpan = card.querySelector('.rating');
        if (ratingSpan) {
            // Example: "‚≠ê 4.8 (18,921)"
            const text = ratingSpan.innerText;
            const match = text.match(/\(([\d,]+)\)/); // extract number inside ()
            if (match) {
                const reviewsCount = parseInt(match[1].replace(/,/g,'')); // remove commas
                card.dataset.reviewsCount = reviewsCount;
                console.log(`Product: ${card.querySelector('.title2').innerText}, Reviews: ${reviewsCount}`);
            }
        }
    });
}

// Call on DOM load
document.addEventListener('DOMContentLoaded', updateReviewsCount);



//show the filtered list
document.addEventListener("DOMContentLoaded", function(){

    const userBudget = Number(localStorage.getItem("budget"));
    if(!userBudget) return;

    // Update filter button text
    const budgetBtn = document.querySelector(".filters button");
    if(budgetBtn){
        budgetBtn.innerText = `Budget: ‚Çπ0 - ‚Çπ${userBudget.toLocaleString("en-IN")}`;
    }

    let visibleCount = 0;

    document.querySelectorAll(".product-card").forEach(card => {
        const price = Number(card.dataset.price);

        if(price <= userBudget){
            card.style.display = "flex";
            visibleCount++;
        }else{
            card.style.display = "none";
        }
    });

    // If no products match
    if(visibleCount === 0){
        const grid = document.querySelector(".grid");
        grid.innerHTML = `
            <div style="grid-column:1/-1;text-align:center;color:gray;padding:40px;">
                üòî No products found within your budget
            </div>
        `;
    }

});

//
document.addEventListener("DOMContentLoaded", () => {

    const budget = Number(localStorage.getItem("budget"));

    if (!budget) return;

    let visibleCount = 0;

    document.querySelectorAll(".product-card").forEach(card => {
        const price = Number(card.dataset.price);

        if (price <= budget) {
            card.style.display = "block"; // or flex (use what your layout uses)
            visibleCount++;
        } else {
            card.style.display = "none";
        }
    });

    // Optional: Show message if nothing matches
    if (visibleCount === 0) {
        document.querySelector(".products-container").innerHTML = `
            <div style="
                text-align:center;
                padding:50px;
                color:#6b7280;
                font-size:18px;
            ">
                üòï No products found under ‚Çπ${budget}
            </div>
        `;
    }
});

//budget info
const budget = Number(localStorage.getItem("budget"));
document.getElementById("budgetInfo").innerText =
    `Showing products under ‚Çπ${budget}`;



</script>
</body>
</html>
